<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}Army Personnel System{% endblock %}</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      :root {
        --primary-color: #2c5aa0;
        --secondary-color: #8a0a0a;
        --light-bg: #f8f9fa;
        --accent-color: #d4af37;
      }

      body {
        background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        min-height: 100vh;
        padding: 20px 0;
      }

      .form-container {
        background-color: white;
        border-radius: 12px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        padding: 30px;
        margin: 20px auto;
        border: 1px solid #e1e5eb;
      }

      .header-section {
        background: linear-gradient(135deg, var(--primary-color), #1a3a7a);
        color: white;
        padding: 25px;
        border-radius: 10px;
        margin-bottom: 30px;
        text-align: center;
        position: relative;
        overflow: hidden;
      }

      .header-section::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 5px;
        background: var(--accent-color);
      }

      .header-section h1 {
        font-weight: 700;
        margin-bottom: 10px;
        font-size: 2.2rem;
      }

      .header-section p {
        font-size: 1.1rem;
        opacity: 0.9;
      }

      .form-section {
        margin-bottom: 35px;
        padding: 25px;
        border: 1px solid #e0e0e0;
        border-radius: 10px;
        background-color: var(--light-bg);
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        transition: all 0.3s ease;
      }

      .form-section:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.08);
      }

      .section-header {
        color: var(--primary-color);
        border-bottom: 2px solid var(--secondary-color);
        padding-bottom: 12px;
        margin-bottom: 25px;
        font-weight: 700;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .section-header i {
        color: var(--secondary-color);
      }

      .required::after {
        content: " *";
        color: red;
      }

      .form-label {
        font-weight: 600;
        margin-bottom: 8px;
        color: #444;
      }

      .dynamic-table {
        margin-top: 15px;
      }

      .dynamic-table .btn-add-row {
        margin-top: 10px;
        background-color: var(--primary-color);
        color: white;
        border: none;
        border-radius: 5px;
        padding: 8px 15px;
        font-weight: 600;
        transition: all 0.3s ease;
      }

      .dynamic-table .btn-add-row:hover {
        background-color: #1a3a7a;
        transform: translateY(-2px);
      }

      .photo-upload-area {
        border: 2px dashed #ccc;
        border-radius: 8px;
        padding: 25px;
        text-align: center;
        margin-bottom: 15px;
        background-color: #f9f9f9;
        transition: all 0.3s ease;
        cursor: pointer;
      }

      .photo-upload-area:hover {
        border-color: var(--primary-color);
        background-color: #f0f4ff;
      }

      .photo-preview {
        max-width: 150px;
        max-height: 150px;
        margin: 10px auto;
        display: none;
        border-radius: 5px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }

      .conditional-section {
        display: none;
        margin-top: 15px;
        padding: 20px;
        background-color: #fff;
        border-radius: 8px;
        border-left: 4px solid var(--secondary-color);
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
      }

      .btn-submit {
        background: linear-gradient(135deg, var(--secondary-color), #6a0505);
        color: white;
        padding: 12px 40px;
        font-weight: 700;
        border: none;
        border-radius: 8px;
        font-size: 1.1rem;
        transition: all 0.3s ease;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .btn-submit:hover {
        transform: translateY(-3px);
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        background: linear-gradient(135deg, #9a0a0a, #6a0505);
      }

      .form-control:focus,
      .form-select:focus {
        border-color: var(--primary-color);
        box-shadow: 0 0 0 0.2rem rgba(44, 90, 160, 0.25);
      }

      .nav-tabs {
        border-bottom: 2px solid var(--primary-color);
        margin-bottom: 25px;
      }

      .nav-tabs .nav-link {
        color: var(--primary-color);
        font-weight: 600;
        border: none;
        padding: 12px 25px;
        border-radius: 8px 8px 0 0;
        margin-right: 5px;
        transition: all 0.3s ease;
      }

      .nav-tabs .nav-link:hover {
        background-color: rgba(44, 90, 160, 0.1);
      }

      .nav-tabs .nav-link.active {
        background-color: var(--primary-color);
        color: white;
        border: none;
      }

      .error-message {
        color: red;
        font-size: 0.875em;
        display: none;
        margin-top: 5px;
      }

      .form-control.is-invalid {
        border-color: #dc3545;
        box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25);
      }

      .card-style {
        border: none;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
        margin-bottom: 20px;
        transition: all 0.3s ease;
      }

      .card-style:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
      }

      .btn-navigation {
        background-color: var(--primary-color);
        color: white;
        border: none;
        border-radius: 8px;
        padding: 10px 25px;
        font-weight: 600;
        transition: all 0.3s ease;
      }

      .btn-navigation:hover {
        background-color: #1a3a7a;
        transform: translateY(-2px);
      }

      .progress-container {
        margin-bottom: 30px;
      }

      .progress-bar {
        background-color: var(--primary-color);
      }

      .info-box {
        background: linear-gradient(135deg, #e3f2fd, #f0f4ff);
        border-left: 4px solid var(--primary-color);
        padding: 15px;
        border-radius: 5px;
        margin-bottom: 20px;
      }

      .info-box i {
        color: var(--primary-color);
        margin-right: 10px;
      }

      .table th {
        background-color: var(--primary-color);
        color: white;
      }

      .footer-note {
        text-align: center;
        margin-top: 30px;
        padding-top: 20px;
        border-top: 1px solid #e0e0e0;
        color: #666;
        font-size: 0.9rem;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-lg-12">
          <div class="form-container">
            <div class="header-section">
              <h1>
                <i class="fas fa-id-card-alt"></i> Army Personnel Information
                Form
              </h1>
              <p>
                Complete and comprehensive personnel record management system
              </p>
            </div>

            <div class="progress-container">
              <div class="progress" style="height: 10px">
                <div
                  class="progress-bar"
                  role="progressbar"
                  style="width: 20%"
                  aria-valuenow="20"
                  aria-valuemin="0"
                  aria-valuemax="100"
                ></div>
              </div>
            </div>

            <ul class="nav nav-tabs mb-4" id="formTabs" role="tablist">
              <li class="nav-item" role="presentation">
                <button
                  class="nav-link active"
                  id="personal-tab"
                  data-bs-toggle="tab"
                  data-bs-target="#personal"
                  type="button"
                  role="tab"
                >
                  <i class="fas fa-user"></i> Personal Details
                </button>
              </li>
              <li class="nav-item" role="presentation">
                <button
                  class="nav-link"
                  id="courses-tab"
                  data-bs-toggle="tab"
                  data-bs-target="#courses"
                  type="button"
                  role="tab"
                >
                  <i class="fas fa-graduation-cap"></i> Courses & Service
                </button>
              </li>
              <li class="nav-item" role="presentation">
                <button
                  class="nav-link"
                  id="medical-tab"
                  data-bs-toggle="tab"
                  data-bs-target="#medical"
                  type="button"
                  role="tab"
                >
                  <i class="fas fa-heartbeat"></i> Medical Details
                </button>
              </li>
              <li class="nav-item" role="presentation">
                <button
                  class="nav-link"
                  id="family-tab"
                  data-bs-toggle="tab"
                  data-bs-target="#family"
                  type="button"
                  role="tab"
                >
                  <i class="fas fa-users"></i> Family Details
                </button>
              </li>
              <li class="nav-item" role="presentation">
                <button
                  class="nav-link"
                  id="additional-tab"
                  data-bs-toggle="tab"
                  data-bs-target="#additional"
                  type="button"
                  role="tab"
                >
                  <i class="fas fa-info-circle"></i> Additional Info
                </button>
              </li>
            </ul>

            <form id="armyForm">
              <div class="tab-content" id="formTabsContent">
                <!-- Personal Details Tab -->
                <div
                  class="tab-pane fade show active"
                  id="personal"
                  role="tabpanel"
                >
                  <div class="info-box">
                    <i class="fas fa-info-circle"></i> Please provide accurate
                    personal information as per official records.
                  </div>

                  <div class="form-section">
                    <h3 class="section-header">
                      <i class="fas fa-id-card"></i> Personal Information
                    </h3>

                    <div class="row">
                      <div class="col-md-6 mb-3">
                        <label for="name" class="form-label required"
                          >Name</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="name"
                          required
                        />
                        <div class="error-message" id="name-error">
                          Only letters, spaces, and hyphens are allowed
                        </div>
                      </div>
                      <div class="col-md-6 mb-3">
                        <label for="armyNumber" class="form-label required"
                          >Army Number</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="armyNumber"
                          required
                        />
                        <div class="error-message" id="armyNumber-error">
                          Only alphanumeric characters, hyphens, and underscores
                          are allowed
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-6 mb-3">
                        <label for="rank" class="form-label required"
                          >Rank</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="rank"
                          required
                        />
                        <div class="error-message" id="rank-error">
                          Only letters, numbers, hyphens, and underscores are
                          allowed
                        </div>
                      </div>
                      <div class="col-md-6 mb-3">
                        <label for="trade" class="form-label required"
                          >Trade</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="trade"
                          required
                        />
                        <div class="error-message" id="trade-error">
                          Only letters, numbers, hyphens, and underscores are
                          allowed
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-6 mb-3">
                        <label
                          for="dateOfEnrollment"
                          class="form-label required"
                          >Date of Enrollment</label
                        >
                        <input
                          type="date"
                          class="form-control"
                          id="dateOfEnrollment"
                          required
                        />
                      </div>
                      <div class="col-md-6 mb-3">
                        <label for="dateOfBirth" class="form-label required"
                          >Date of Birth</label
                        >
                        <input
                          type="date"
                          class="form-control"
                          id="dateOfBirth"
                          required
                        />
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-6 mb-3">
                        <label for="dateOfTOS" class="form-label"
                          >Date of TOS</label
                        >
                        <input
                          type="date"
                          class="form-control"
                          id="dateOfTOS"
                        />
                      </div>
                      <div class="col-md-6 mb-3">
                        <label for="dateOfTORS" class="form-label"
                          >Date of TORS</label
                        >
                        <input
                          type="date"
                          class="form-control"
                          id="dateOfTORS"
                        />
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-6 mb-3">
                        <label for="bloodGroup" class="form-label required"
                          >Blood Group</label
                        >
                        <select class="form-select" id="bloodGroup" required>
                          <option value="">Select</option>
                          <option value="A+">A+</option>
                          <option value="A-">A-</option>
                          <option value="B+">B+</option>
                          <option value="B-">B-</option>
                          <option value="O+">O+</option>
                          <option value="O-">O-</option>
                          <option value="AB+">AB+</option>
                          <option value="AB-">AB-</option>
                        </select>
                      </div>
                      <div class="col-md-6 mb-3">
                        <label for="religion" class="form-label required"
                          >Religion</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="religion"
                          required
                        />
                        <div class="error-message" id="religion-error">
                          Only letters, spaces, hyphens, and underscores are
                          allowed
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-4 mb-3">
                        <label class="form-label required"
                          >Food Preference</label
                        >
                        <div>
                          <div class="form-check form-check-inline">
                            <input
                              class="form-check-input"
                              type="radio"
                              name="foodPreference"
                              id="veg"
                              value="Vegetarian"
                              required
                            />
                            <label class="form-check-label" for="veg"
                              >Vegetarian</label
                            >
                          </div>
                          <div class="form-check form-check-inline">
                            <input
                              class="form-check-input"
                              type="radio"
                              name="foodPreference"
                              id="nonVeg"
                              value="Non-Vegetarian"
                            />
                            <label class="form-check-label" for="nonVeg"
                              >Non-Vegetarian</label
                            >
                          </div>
                        </div>
                      </div>
                      <div class="col-md-4 mb-3">
                        <label class="form-label required">Drinker</label>
                        <div>
                          <div class="form-check form-check-inline">
                            <input
                              class="form-check-input"
                              type="radio"
                              name="drinker"
                              id="drinkerYes"
                              value="Yes"
                              required
                            />
                            <label class="form-check-label" for="drinkerYes"
                              >Yes</label
                            >
                          </div>
                          <div class="form-check form-check-inline">
                            <input
                              class="form-check-input"
                              type="radio"
                              name="drinker"
                              id="drinkerNo"
                              value="No"
                            />
                            <label class="form-check-label" for="drinkerNo"
                              >No</label
                            >
                          </div>
                        </div>
                      </div>
                       <div class="col-md-4 mb-3">
                        <label for="company" class="form-label required"
                          >Company</label
                        >
                        <select class="form-select" id="bloodGroup" required>
                          <option value="">Select</option>
                          <option value="1 Company">1 Company</option>
                          <option value="2 Company">2 Company</option>
                          <option value="3 Company">3 Company</option>
                          <option value="4 Company">4 Company</option>
                        </select>
                      </div>
                    </div>
                    
                     

                    <div class="row">
                      <div class="col-md-6 mb-3">
                        <label for="civQualifications" class="form-label"
                          >Civil Qualifications</label
                        >
                        <textarea
                          class="form-control"
                          id="civQualifications"
                          rows="2"
                        ></textarea>
                        <div class="error-message" id="civQualifications-error">
                          Only letters, numbers, spaces, hyphens, and
                          underscores are allowed
                        </div>
                      </div>
                      <div class="col-md-6 mb-3">
                        <label for="decorationAwards" class="form-label"
                          >Decoration/Awards</label
                        >
                        <textarea
                          class="form-control"
                          id="decorationAwards"
                          rows="2"
                        ></textarea>
                        <div class="error-message" id="decorationAwards-error">
                          Only letters, numbers, spaces, hyphens, and
                          underscores are allowed
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-6 mb-3">
                        <label for="lackingQualifications" class="form-label"
                          >Lacking Qualifications</label
                        >
                        <textarea
                          class="form-control"
                          id="lackingQualifications"
                          rows="2"
                        ></textarea>
                        <div
                          class="error-message"
                          id="lackingQualifications-error"
                        >
                          Only letters, numbers, spaces, hyphens, and
                          underscores are allowed
                        </div>
                      </div>
                      <div class="col-md-6 mb-3">
                        <label class="form-label required"
                          >Willing for Future Promotions</label
                        >
                        <div>
                          <div class="form-check form-check-inline">
                            <input
                              class="form-check-input"
                              type="radio"
                              name="willingPromotions"
                              id="willingYes"
                              value="Yes"
                              required
                            />
                            <label class="form-check-label" for="willingYes"
                              >Yes</label
                            >
                          </div>
                          <div class="form-check form-check-inline">
                            <input
                              class="form-check-input"
                              type="radio"
                              name="willingPromotions"
                              id="willingNo"
                              value="No"
                            />
                            <label class="form-check-label" for="willingNo"
                              >No</label
                            >
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-4 mb-3">
                        <label for="iCardNo" class="form-label"
                          >I Card No.</label
                        >
                        <input type="text" class="form-control" id="iCardNo" />
                        <div class="error-message" id="iCardNo-error">
                          Only alphanumeric characters, hyphens, and underscores
                          are allowed
                        </div>
                      </div>
                      <div class="col-md-4 mb-3">
                        <label for="iCardDate" class="form-label"
                          >Date of Issue</label
                        >
                        <input
                          type="date"
                          class="form-control"
                          id="iCardDate"
                        />
                      </div>
                      <div class="col-md-4 mb-3">
                        <label for="iCardIssuedBy" class="form-label"
                          >Issued By</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="iCardIssuedBy"
                        />
                        <div class="error-message" id="iCardIssuedBy-error">
                          Only letters, numbers, spaces, hyphens, and
                          underscores are allowed
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-4 mb-3">
                        <label for="bpetGrading" class="form-label"
                          >Grading in BPET</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="bpetGrading"
                        />
                        <div class="error-message" id="bpetGrading-error">
                          Only letters, numbers, hyphens, and underscores are
                          allowed
                        </div>
                      </div>
                      <div class="col-md-4 mb-3">
                        <label for="pptGrading" class="form-label"
                          >Grading in PPT</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="pptGrading"
                        />
                        <div class="error-message" id="pptGrading-error">
                          Only letters, numbers, hyphens, and underscores are
                          allowed
                        </div>
                      </div>
                      <div class="col-md-4 mb-3">
                        <label for="bpetDate" class="form-label">Date</label>
                        <input type="date" class="form-control" id="bpetDate" />
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-6 mb-3">
                        <label class="form-label"
                          >Original Clothing Card Held</label
                        >
                        <div>
                          <div class="form-check form-check-inline">
                            <input
                              class="form-check-input"
                              type="radio"
                              name="clothingCard"
                              id="clothingYes"
                              value="Yes"
                            />
                            <label class="form-check-label" for="clothingYes"
                              >Yes</label
                            >
                          </div>
                          <div class="form-check form-check-inline">
                            <input
                              class="form-check-input"
                              type="radio"
                              name="clothingCard"
                              id="clothingNo"
                              value="No"
                            />
                            <label class="form-check-label" for="clothingNo"
                              >No</label
                            >
                          </div>
                        </div>
                      </div>
                    </div>

                    <h5 class="mt-4 mb-3" style="color: var(--primary-color)">
                      <i class="fas fa-file-alt"></i> Document Details
                    </h5>
                    <div class="row">
                      <div class="col-md-4 mb-3">
                        <label for="panCardNo" class="form-label"
                          >PAN Card No.</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="panCardNo"
                        />
                        <div class="error-message" id="panCardNo-error">
                          Only alphanumeric characters are allowed
                        </div>
                      </div>
                      <div class="col-md-4 mb-3">
                        <label for="panPartII" class="form-label"
                          >Part II Order No.</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="panPartII"
                        />
                        <div class="error-message" id="panPartII-error">
                          Only alphanumeric characters, hyphens, and underscores
                          are allowed
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-4 mb-3">
                        <label for="aadharCardNo" class="form-label"
                          >Aadhar Card No.</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="aadharCardNo"
                        />
                        <div class="error-message" id="aadharCardNo-error">
                          Only numbers are allowed
                        </div>
                      </div>
                      <div class="col-md-4 mb-3">
                        <label for="aadharPartII" class="form-label"
                          >Part II Order No.</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="aadharPartII"
                        />
                        <div class="error-message" id="aadharPartII-error">
                          Only alphanumeric characters, hyphens, and underscores
                          are allowed
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-4 mb-3">
                        <label for="jointAccountNo" class="form-label"
                          >Joint A/C No.</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="jointAccountNo"
                        />
                        <div class="error-message" id="jointAccountNo-error">
                          Only alphanumeric characters, hyphens, and underscores
                          are allowed
                        </div>
                      </div>
                      <div class="col-md-4 mb-3">
                        <label for="jointAccountBank" class="form-label"
                          >Bank</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="jointAccountBank"
                        />
                        <div class="error-message" id="jointAccountBank-error">
                          Only letters, numbers, spaces, hyphens, and
                          underscores are allowed
                        </div>
                      </div>
                      <div class="col-md-4 mb-3">
                        <label for="jointAccountIFSC" class="form-label"
                          >IFSC Code</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="jointAccountIFSC"
                        />
                        <div class="error-message" id="jointAccountIFSC-error">
                          Only alphanumeric characters are allowed
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="form-section">
                    <h3 class="section-header">
                      <i class="fas fa-home"></i> Permanent Home Address
                    </h3>

                    <div class="row">
                      <div class="col-md-6 mb-3">
                        <label for="homeHouseNo" class="form-label"
                          >House No./Name</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="homeHouseNo"
                        />
                        <div class="error-message" id="homeHouseNo-error">
                          Only letters, numbers, spaces, hyphens, and
                          underscores are allowed
                        </div>
                      </div>
                      <div class="col-md-6 mb-3">
                        <label for="homeVillage" class="form-label"
                          >Village</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="homeVillage"
                        />
                        <div class="error-message" id="homeVillage-error">
                          Only letters, numbers, spaces, hyphens, and
                          underscores are allowed
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-6 mb-3">
                        <label for="homePhone" class="form-label"
                          >Telephone/Mobile No.</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="homePhone"
                        />
                        <div class="error-message" id="homePhone-error">
                          Only numbers, plus, and hyphens are allowed
                        </div>
                      </div>
                      <div class="col-md-6 mb-3">
                        <label for="homeTO" class="form-label"
                          >Tehsil Office</label
                        >
                        <input type="text" class="form-control" id="homeTO" />
                        <div class="error-message" id="homeTO-error">
                          Only letters, numbers, spaces, hyphens, and
                          underscores are allowed
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-4 mb-3">
                        <label for="homePO" class="form-label"
                          >Post Office</label
                        >
                        <input type="text" class="form-control" id="homePO" />
                        <div class="error-message" id="homePO-error">
                          Only letters, numbers, spaces, hyphens, and
                          underscores are allowed
                        </div>
                      </div>
                      <div class="col-md-4 mb-3">
                        <label for="homePS" class="form-label"
                          >Police Station</label
                        >
                        <input type="text" class="form-control" id="homePS" />
                        <div class="error-message" id="homePS-error">
                          Only letters, numbers, spaces, hyphens, and
                          underscores are allowed
                        </div>
                      </div>
                      <div class="col-md-4 mb-3">
                        <label for="homeTeh" class="form-label">Tehsil</label>
                        <input type="text" class="form-control" id="homeTeh" />
                        <div class="error-message" id="homeTeh-error">
                          Only letters, numbers, spaces, hyphens, and
                          underscores are allowed
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-4 mb-3">
                        <label for="homeNRS" class="form-label">NRS</label>
                        <input type="text" class="form-control" id="homeNRS" />
                        <div class="error-message" id="homeNRS-error">
                          Only letters, numbers, spaces, hyphens, and
                          underscores are allowed
                        </div>
                      </div>
                      <div class="col-md-4 mb-3">
                        <label for="homeNMH" class="form-label">NMH</label>
                        <input type="text" class="form-control" id="homeNMH" />
                        <div class="error-message" id="homeNMH-error">
                          Only letters, numbers, spaces, hyphens, and
                          underscores are allowed
                        </div>
                      </div>
                      <div class="col-md-4 mb-3">
                        <label for="homeDistrict" class="form-label"
                          >District</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="homeDistrict"
                        />
                        <div class="error-message" id="homeDistrict-error">
                          Only letters, numbers, spaces, hyphens, and
                          underscores are allowed
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-6 mb-3">
                        <label for="homeState" class="form-label">State</label>
                        <input
                          type="text"
                          class="form-control"
                          id="homeState"
                        />
                        <div class="error-message" id="homeState-error">
                          Only letters, numbers, spaces, hyphens, and
                          underscores are allowed
                        </div>
                      </div>
                      <div class="col-md-6 mb-3">
                        <label class="form-label">Belong to Border Area</label>
                        <div>
                          <div class="form-check form-check-inline">
                            <input
                              class="form-check-input"
                              type="radio"
                              name="borderArea"
                              id="borderYes"
                              value="Yes"
                            />
                            <label class="form-check-label" for="borderYes"
                              >Yes</label
                            >
                          </div>
                          <div class="form-check form-check-inline">
                            <input
                              class="form-check-input"
                              type="radio"
                              name="borderArea"
                              id="borderNo"
                              value="No"
                            />
                            <label class="form-check-label" for="borderNo"
                              >No</label
                            >
                          </div>
                        </div>
                      </div>
                    </div>

                    <div id="borderDistance" class="conditional-section">
                      <div class="row">
                        <div class="col-md-6 mb-3">
                          <label for="distanceFromIB" class="form-label"
                            >Distance from IB</label
                          >
                          <input
                            type="text"
                            class="form-control"
                            id="distanceFromIB"
                          />
                          <div class="error-message" id="distanceFromIB-error">
                            Only numbers and decimal points are allowed
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="form-section">
                    <h3 class="section-header">
                      <i class="fas fa-user-circle"></i> Physical Description
                    </h3>

                    <div class="row">
                      <div class="col-md-3 mb-3">
                        <label for="height" class="form-label">Height</label>
                        <input type="text" class="form-control" id="height" />
                        <div class="error-message" id="height-error">
                          Only numbers and decimal points are allowed
                        </div>
                      </div>
                      <div class="col-md-3 mb-3">
                        <label for="weight" class="form-label">Weight</label>
                        <input type="text" class="form-control" id="weight" />
                        <div class="error-message" id="weight-error">
                          Only numbers and decimal points are allowed
                        </div>
                      </div>
                      <div class="col-md-3 mb-3">
                        <label for="chest" class="form-label">Chest</label>
                        <input type="text" class="form-control" id="chest" />
                        <div class="error-message" id="chest-error">
                          Only numbers and decimal points are allowed
                        </div>
                      </div>
                      <div class="col-md-3 mb-3">
                        <label for="identificationMarks" class="form-label"
                          >Identification Marks</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="identificationMarks"
                        />
                        <div
                          class="error-message"
                          id="identificationMarks-error"
                        >
                          Only letters, numbers, spaces, hyphens, and
                          underscores are allowed
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Courses & Service Tab -->
                <div class="tab-pane fade" id="courses" role="tabpanel">
                  <div class="info-box">
                    <i class="fas fa-info-circle"></i> Please provide complete
                    details of your service history, courses, and other relevant
                    information.
                  </div>

                  <div class="form-section">
                    <h3 class="section-header">
                      <i class="fas fa-graduation-cap"></i> Courses & Service
                      Details
                    </h3>

                    <h5 class="mt-4 mb-3" style="color: var(--primary-color)">
                      <i class="fas fa-book"></i> Army Courses
                    </h5>
                    <div class="dynamic-table">
                      <table class="table table-bordered" id="coursesTable">
                        <thead class="table-light">
                          <tr>
                            <th>Sr No.</th>
                            <th>Course</th>
                            <th>From</th>
                            <th>To</th>
                            <th>Institute</th>
                            <th>Grading</th>
                            <th>Remarks</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td>1</td>
                            <td>
                              <input
                                type="text"
                                class="form-control form-control-sm course-input"
                                name="course[]"
                              />
                            </td>
                            <td>
                              <input
                                type="date"
                                class="form-control form-control-sm"
                                name="courseFrom[]"
                              />
                            </td>
                            <td>
                              <input
                                type="date"
                                class="form-control form-control-sm"
                                name="courseTo[]"
                              />
                            </td>
                            <td>
                              <input
                                type="text"
                                class="form-control form-control-sm course-input"
                                name="courseInstitute[]"
                              />
                            </td>
                            <td>
                              <input
                                type="text"
                                class="form-control form-control-sm course-input"
                                name="courseGrading[]"
                              />
                            </td>
                            <td>
                              <input
                                type="text"
                                class="form-control form-control-sm course-input"
                                name="courseRemarks[]"
                              />
                            </td>
                          </tr>
                        </tbody>
                      </table>
                      <button
                        type="button"
                        class="btn btn-sm btn-add-row"
                        id="addCourseRow"
                      >
                        + Add Row
                      </button>
                    </div>

                    <h5 class="mt-4 mb-3" style="color: var(--primary-color)">
                      <i class="fas fa-map-marker-alt"></i> Unit Served
                    </h5>
                    <div class="dynamic-table">
                      <table class="table table-bordered" id="unitsTable">
                        <thead class="table-light">
                          <tr>
                            <th>Sr No.</th>
                            <th>Unit</th>
                            <th>From</th>
                            <th>To</th>
                            <th>Duty Performed</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td>1</td>
                            <td>
                              <input
                                type="text"
                                class="form-control form-control-sm unit-input"
                                name="unit[]"
                              />
                            </td>
                            <td>
                              <input
                                type="date"
                                class="form-control form-control-sm"
                                name="unitFrom[]"
                              />
                            </td>
                            <td>
                              <input
                                type="date"
                                class="form-control form-control-sm"
                                name="unitTo[]"
                              />
                            </td>
                            <td>
                              <input
                                type="text"
                                class="form-control form-control-sm unit-input"
                                name="unitDuty[]"
                              />
                            </td>
                          </tr>
                        </tbody>
                      </table>
                      <button
                        type="button"
                        class="btn btn-sm btn-add-row"
                        id="addUnitRow"
                      >
                        + Add Row
                      </button>
                    </div>

                    <div class="row mt-4">
                      <div class="col-md-12 mb-3">
                        <label for="courtCases" class="form-label"
                          >Court Cases if any</label
                        >
                        <textarea
                          class="form-control"
                          id="courtCases"
                          rows="2"
                        ></textarea>
                        <div class="error-message" id="courtCases-error">
                          Only letters, numbers, spaces, hyphens, and
                          underscores are allowed
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-6 mb-3">
                        <label class="form-label">Loan</label>
                        <div>
                          <div class="form-check form-check-inline">
                            <input
                              class="form-check-input"
                              type="radio"
                              name="loan"
                              id="loanYes"
                              value="Yes"
                            />
                            <label class="form-check-label" for="loanYes"
                              >Yes</label
                            >
                          </div>
                          <div class="form-check form-check-inline">
                            <input
                              class="form-check-input"
                              type="radio"
                              name="loan"
                              id="loanNo"
                              value="No"
                            />
                            <label class="form-check-label" for="loanNo"
                              >No</label
                            >
                          </div>
                        </div>
                      </div>
                    </div>

                    <div id="loanDetails" class="conditional-section">
                      <h6>Loan Details</h6>
                      <div class="dynamic-table">
                        <table class="table table-bordered" id="loansTable">
                          <thead class="table-light">
                            <tr>
                              <th>Sr No.</th>
                              <th>Type of Loan</th>
                              <th>Total Amount</th>
                              <th>Bank Details</th>
                              <th>EMI per Month</th>
                              <th>Pending</th>
                              <th>Remarks</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr>
                              <td>1</td>
                              <td>
                                <input
                                  type="text"
                                  class="form-control form-control-sm loan-input"
                                  name="loanType[]"
                                />
                              </td>
                              <td>
                                <input
                                  type="text"
                                  class="form-control form-control-sm loan-input"
                                  name="loanAmount[]"
                                />
                              </td>
                              <td>
                                <input
                                  type="text"
                                  class="form-control form-control-sm loan-input"
                                  name="loanBank[]"
                                />
                              </td>
                              <td>
                                <input
                                  type="text"
                                  class="form-control form-control-sm loan-input"
                                  name="loanEMI[]"
                                />
                              </td>
                              <td>
                                <input
                                  type="text"
                                  class="form-control form-control-sm loan-input"
                                  name="loanPending[]"
                                />
                              </td>
                              <td>
                                <input
                                  type="text"
                                  class="form-control form-control-sm loan-input"
                                  name="loanRemarks[]"
                                />
                              </td>
                            </tr>
                          </tbody>
                        </table>
                        <button
                          type="button"
                          class="btn btn-sm btn-add-row"
                          id="addLoanRow"
                        >
                          + Add Row
                        </button>
                      </div>
                    </div>

                    <h5 class="mt-4 mb-3" style="color: var(--primary-color)">
                      <i class="fas fa-gavel"></i> Punishment Details
                    </h5>
                    <div class="dynamic-table">
                      <table class="table table-bordered" id="punishmentTable">
                        <thead class="table-light">
                          <tr>
                            <th>Sr No.</th>
                            <th>Date</th>
                            <th>Punishment (Red/Black)</th>
                            <th>AA Sec</th>
                            <th>Remarks</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td>1</td>
                            <td>
                              <input
                                type="date"
                                class="form-control form-control-sm"
                                name="punishmentDate[]"
                              />
                            </td>
                            <td>
                              <input
                                type="text"
                                class="form-control form-control-sm punishment-input"
                                name="punishment[]"
                              />
                            </td>
                            <td>
                              <input
                                type="text"
                                class="form-control form-control-sm punishment-input"
                                name="punishmentAASec[]"
                              />
                            </td>
                            <td>
                              <input
                                type="text"
                                class="form-control form-control-sm punishment-input"
                                name="punishmentRemarks[]"
                              />
                            </td>
                          </tr>
                        </tbody>
                      </table>
                      <button
                        type="button"
                        class="btn btn-sm btn-add-row"
                        id="addPunishmentRow"
                      >
                        + Add Row
                      </button>
                    </div>

                    <div class="row mt-4">
                      <div class="col-md-6 mb-3">
                        <label class="form-label">Detailed in any Course</label>
                        <div>
                          <div class="form-check form-check-inline">
                            <input
                              class="form-check-input"
                              type="radio"
                              name="detailedCourse"
                              id="detailedYes"
                              value="Yes"
                            />
                            <label class="form-check-label" for="detailedYes"
                              >Yes</label
                            >
                          </div>
                          <div class="form-check form-check-inline">
                            <input
                              class="form-check-input"
                              type="radio"
                              name="detailedCourse"
                              id="detailedNo"
                              value="No"
                            />
                            <label class="form-check-label" for="detailedNo"
                              >No</label
                            >
                          </div>
                        </div>
                      </div>
                    </div>

                    <div id="detailedCourseDetails" class="conditional-section">
                      <h6>Course Details</h6>
                      <div class="dynamic-table">
                        <table
                          class="table table-bordered"
                          id="detailedCoursesTable"
                        >
                          <thead class="table-light">
                            <tr>
                              <th>Sr No.</th>
                              <th>Course</th>
                              <th>From</th>
                              <th>To</th>
                              <th>Remarks</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr>
                              <td>1</td>
                              <td>
                                <input
                                  type="text"
                                  class="form-control form-control-sm detailed-course-input"
                                  name="detailedCourseName[]"
                                />
                              </td>
                              <td>
                                <input
                                  type="date"
                                  class="form-control form-control-sm"
                                  name="detailedCourseFrom[]"
                                />
                              </td>
                              <td>
                                <input
                                  type="date"
                                  class="form-control form-control-sm"
                                  name="detailedCourseTo[]"
                                />
                              </td>
                              <td>
                                <input
                                  type="text"
                                  class="form-control form-control-sm detailed-course-input"
                                  name="detailedCourseRemarks[]"
                                />
                              </td>
                            </tr>
                          </tbody>
                        </table>
                        <button
                          type="button"
                          class="btn btn-sm btn-add-row"
                          id="addDetailedCourseRow"
                        >
                          + Add Row
                        </button>
                      </div>
                    </div>

                    <h5 class="mt-4 mb-3" style="color: var(--primary-color)">
                      <i class="fas fa-calendar-alt"></i> Leave Details
                    </h5>
                    <div class="dynamic-table">
                      <table class="table table-bordered" id="leaveTable">
                        <thead class="table-light">
                          <tr>
                            <th>Sr No.</th>
                            <th>Year</th>
                            <th>AL (Days)</th>
                            <th>CL (Days)</th>
                            <th>AAL (Days)</th>
                            <th>Total</th>
                            <th>Remarks</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td>1</td>
                            <td>
                              <input
                                type="text"
                                class="form-control form-control-sm leave-input"
                                name="leaveYear[]"
                              />
                            </td>
                            <td>
                              <input
                                type="number"
                                class="form-control form-control-sm"
                                name="leaveAL[]"
                              />
                            </td>
                            <td>
                              <input
                                type="number"
                                class="form-control form-control-sm"
                                name="leaveCL[]"
                              />
                            </td>
                            <td>
                              <input
                                type="number"
                                class="form-control form-control-sm"
                                name="leaveAAL[]"
                              />
                            </td>
                            <td>
                              <input
                                type="number"
                                class="form-control form-control-sm"
                                name="leaveTotal[]"
                              />
                            </td>
                            <td>
                              <input
                                type="text"
                                class="form-control form-control-sm leave-input"
                                name="leaveRemarks[]"
                              />
                            </td>
                          </tr>
                        </tbody>
                      </table>
                      <button
                        type="button"
                        class="btn btn-sm btn-add-row"
                        id="addLeaveRow"
                      >
                        + Add Row
                      </button>
                    </div>

                    <div class="row mt-4">
                      <div class="col-md-6 mb-3">
                        <label for="totalLeavesEncashed" class="form-label"
                          >Total Leaves Encashed as on Date</label
                        >
                        <input
                          type="number"
                          class="form-control"
                          id="totalLeavesEncashed"
                        />
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-12 mb-3">
                        <label for="participationActivities" class="form-label"
                          >Participation in Game/Extra Curricular
                          Activities</label
                        >
                        <textarea
                          class="form-control"
                          id="participationActivities"
                          rows="2"
                        ></textarea>
                        <div
                          class="error-message"
                          id="participationActivities-error"
                        >
                          Only letters, numbers, spaces, hyphens, and
                          underscores are allowed
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-12 mb-3">
                        <label for="presentFamilyLocation" class="form-label"
                          >Present Location of Family/MD Accn Reqd</label
                        >
                        <textarea
                          class="form-control"
                          id="presentFamilyLocation"
                          rows="2"
                        ></textarea>
                        <div
                          class="error-message"
                          id="presentFamilyLocation-error"
                        >
                          Only letters, numbers, spaces, hyphens, and
                          underscores are allowed
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-6 mb-3">
                        <label class="form-label">If Kept Prior Station</label>
                        <div>
                          <div class="form-check form-check-inline">
                            <input
                              class="form-check-input"
                              type="radio"
                              name="priorStation"
                              id="priorYes"
                              value="Yes"
                            />
                            <label class="form-check-label" for="priorYes"
                              >Yes</label
                            >
                          </div>
                          <div class="form-check form-check-inline">
                            <input
                              class="form-check-input"
                              type="radio"
                              name="priorStation"
                              id="priorNo"
                              value="No"
                            />
                            <label class="form-check-label" for="priorNo"
                              >No</label
                            >
                          </div>
                        </div>
                      </div>
                      <div class="col-md-6 mb-3">
                        <label for="priorStationDate" class="form-label"
                          >Date (In Living/CILQ)</label
                        >
                        <input
                          type="date"
                          class="form-control"
                          id="priorStationDate"
                        />
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-6 mb-3">
                        <label class="form-label"
                          >Whether Worked in IT/NFS/VC</label
                        >
                        <div>
                          <div class="form-check form-check-inline">
                            <input
                              class="form-check-input"
                              type="radio"
                              name="workedIT"
                              id="workedYes"
                              value="Yes"
                            />
                            <label class="form-check-label" for="workedYes"
                              >Yes</label
                            >
                          </div>
                          <div class="form-check form-check-inline">
                            <input
                              class="form-check-input"
                              type="radio"
                              name="workedIT"
                              id="workedNo"
                              value="No"
                            />
                            <label class="form-check-label" for="workedNo"
                              >No</label
                            >
                          </div>
                        </div>
                      </div>
                      <div class="col-md-6 mb-3">
                        <label for="workedUnitTenure" class="form-label"
                          >Unit/Tenure</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="workedUnitTenure"
                        />
                        <div class="error-message" id="workedUnitTenure-error">
                          Only letters, numbers, spaces, hyphens, and
                          underscores are allowed
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Medical Details Tab -->
                <div class="tab-pane fade" id="medical" role="tabpanel">
                  <div class="info-box">
                    <i class="fas fa-info-circle"></i> Please provide accurate
                    medical information as per official records.
                  </div>

                  <div class="form-section">
                    <h3 class="section-header">
                      <i class="fas fa-heartbeat"></i> Medical Details
                    </h3>

                    <div class="row">
                      <div class="col-md-6 mb-3">
                        <label class="form-label">Med Cat Below Shape-I</label>
                        <div>
                          <div class="form-check form-check-inline">
                            <input
                              class="form-check-input"
                              type="radio"
                              name="medCat"
                              id="medCatYes"
                              value="Yes"
                            />
                            <label class="form-check-label" for="medCatYes"
                              >Yes</label
                            >
                          </div>
                          <div class="form-check form-check-inline">
                            <input
                              class="form-check-input"
                              type="radio"
                              name="medCat"
                              id="medCatNo"
                              value="No"
                            />
                            <label class="form-check-label" for="medCatNo"
                              >No</label
                            >
                          </div>
                        </div>
                      </div>
                    </div>

                    <div id="medCatDetails" class="conditional-section">
                      <div class="row">
                        <div class="col-md-6 mb-3">
                          <label for="lastRecatBDDate" class="form-label"
                            >Last Re-cat BD Done On</label
                          >
                          <input
                            type="date"
                            class="form-control"
                            id="lastRecatBDDate"
                          />
                        </div>
                        <div class="col-md-6 mb-3">
                          <label for="lastRecatBDAt" class="form-label"
                            >Last Re-cat BD Done At</label
                          >
                          <input
                            type="input"
                            class="form-control"
                            id="lastRecatBDAt"
                          />
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-md-6 mb-3">
                          <label for="nextRecatDue" class="form-label"
                            >Next Re-cat Due On</label
                          >
                          <input
                            type="date"
                            class="form-control"
                            id="nextRecatDue"
                          />
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-md-12 mb-3">
                          <label for="medicalProblem" class="form-label"
                            >Brief Description of Medical Problem</label
                          >
                          <textarea
                            class="form-control"
                            id="medicalProblem"
                            rows="3"
                          ></textarea>
                          <div class="error-message" id="medicalProblem-error">
                            Only letters, numbers, spaces, hyphens, and
                            underscores are allowed
                          </div>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-md-12 mb-3">
                          <label for="restrictions" class="form-label"
                            >Restriction Imposed on Duties/Employment as per
                            Re-cat BD/Med BD</label
                          >
                          <textarea
                            class="form-control"
                            id="restrictions"
                            rows="3"
                          ></textarea>
                          <div class="error-message" id="restrictions-error">
                            Only letters, numbers, spaces, hyphens, and
                            underscores are allowed
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="row mt-4">
                      <div class="col-md-6 mb-3">
                        <label for="computerKnowledge" class="form-label"
                          >Computer Awareness (Working Knowledge)</label
                        >
                        <select class="form-select" id="computerKnowledge">
                          <option value="">Select</option>
                          <option value="Excellent">Excellent</option>
                          <option value="Poor">Poor</option>
                        </select>
                      </div>
                      <div class="col-md-6 mb-3">
                        <label for="itLiterature" class="form-label"
                          >IT Literature</label
                        >
                        <select class="form-select" id="itLiterature">
                          <option value="">Select</option>
                          <option value="Excellent">Excellent</option>
                          <option value="Poor">Poor</option>
                        </select>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Family Details Tab -->
                <div class="tab-pane fade" id="family" role="tabpanel">
                  <div class="info-box">
                    <i class="fas fa-info-circle"></i> Please provide complete
                    and accurate family details as per official records.
                  </div>

                  <div class="form-section">
                    <h3 class="section-header">
                      <i class="fas fa-users"></i> Family Details
                    </h3>

                    <h5 class="mt-4 mb-3" style="color: var(--primary-color)">
                      <i class="fas fa-user-friends"></i> Next of Kin Details
                    </h5>
                    <div class="row">
                      <div class="col-md-4 mb-3">
                        <label for="kinName" class="form-label">Name</label>
                        <input type="text" class="form-control" id="kinName" />
                        <div class="error-message" id="kinName-error">
                          Only letters, spaces, and hyphens are allowed
                        </div>
                      </div>
                      <div class="col-md-4 mb-3">
                        <label for="kinRelation" class="form-label"
                          >Relation</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="kinRelation"
                        />
                        <div class="error-message" id="kinRelation-error">
                          Only letters, spaces, and hyphens are allowed
                        </div>
                      </div>
                      <div class="col-md-4 mb-3">
                        <label for="kinMarriageDate" class="form-label"
                          >Date of Marriage</label
                        >
                        <input
                          type="date"
                          class="form-control"
                          id="kinMarriageDate"
                        />
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-4 mb-3">
                        <label for="kinAccountNo" class="form-label"
                          >Joint A/C No.</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="kinAccountNo"
                        />
                        <div class="error-message" id="kinAccountNo-error">
                          Only alphanumeric characters, hyphens, and underscores
                          are allowed
                        </div>
                      </div>
                      <div class="col-md-4 mb-3">
                        <label for="kinBank" class="form-label">Bank</label>
                        <input type="text" class="form-control" id="kinBank" />
                        <div class="error-message" id="kinBank-error">
                          Only letters, numbers, spaces, hyphens, and
                          underscores are allowed
                        </div>
                      </div>
                      <div class="col-md-4 mb-3">
                        <label for="kinIFSC" class="form-label"
                          >IFSC Code</label
                        >
                        <input type="text" class="form-control" id="kinIFSC" />
                        <div class="error-message" id="kinIFSC-error">
                          Only alphanumeric characters are allowed
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-6 mb-3">
                        <label for="kinPartII" class="form-label"
                          >Part II Order No.</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="kinPartII"
                        />
                        <div class="error-message" id="kinPartII-error">
                          Only alphanumeric characters, hyphens, and underscores
                          are allowed
                        </div>
                      </div>
                    </div>

                    <h5 class="mt-4 mb-3" style="color: var(--primary-color)">
                      <i class="fas fa-home"></i> Family Details
                    </h5>
                    <div class="dynamic-table">
                      <table class="table table-bordered" id="familyTable">
                        <thead class="table-light">
                          <tr>
                            <th>Relation</th>
                            <th>Name</th>
                            <th>Date of Birth</th>
                            <th>UID No.</th>
                            <th>Pt-II Order</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td>
                              <input
                                type="text"
                                class="form-control form-control-sm family-input"
                                name="familyRelation[]"
                              />
                            </td>
                            <td>
                              <input
                                type="text"
                                class="form-control form-control-sm family-input"
                                name="familyName[]"
                              />
                            </td>
                            <td>
                              <input
                                type="date"
                                class="form-control form-control-sm"
                                name="familyDOB[]"
                              />
                            </td>
                            <td>
                              <input
                                type="text"
                                class="form-control form-control-sm family-input"
                                name="familyUID[]"
                              />
                            </td>
                            <td>
                              <input
                                type="text"
                                class="form-control form-control-sm family-input"
                                name="familyPartII[]"
                              />
                            </td>
                          </tr>
                        </tbody>
                      </table>
                      <button
                        type="button"
                        class="btn btn-sm btn-add-row"
                        id="addFamilyRow"
                      >
                        + Add Row
                      </button>
                    </div>

                    <h5 class="mt-4 mb-3" style="color: var(--primary-color)">
                      <i class="fas fa-child"></i> Children Details
                    </h5>
                    <div class="dynamic-table">
                      <table class="table table-bordered" id="childrenTable">
                        <thead class="table-light">
                          <tr>
                            <th>Sr No.</th>
                            <th>Name</th>
                            <th>Date of Birth</th>
                            <th>Class</th>
                            <th>Pt-II Order</th>
                            <th>UID No.</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td>1</td>
                            <td>
                              <input
                                type="text"
                                class="form-control form-control-sm children-input"
                                name="childName[]"
                              />
                            </td>
                            <td>
                              <input
                                type="date"
                                class="form-control form-control-sm"
                                name="childDOB[]"
                              />
                            </td>
                            <td>
                              <input
                                type="text"
                                class="form-control form-control-sm children-input"
                                name="childClass[]"
                              />
                            </td>
                            <td>
                              <input
                                type="text"
                                class="form-control form-control-sm children-input"
                                name="childPartII[]"
                              />
                            </td>
                            <td>
                              <input
                                type="text"
                                class="form-control form-control-sm children-input"
                                name="childUID[]"
                              />
                            </td>
                          </tr>
                        </tbody>
                      </table>
                      <button
                        type="button"
                        class="btn btn-sm btn-add-row"
                        id="addChildRow"
                      >
                        + Add Row
                      </button>
                    </div>

                    <h5 class="mt-4 mb-3" style="color: var(--primary-color)">
                      <i class="fas fa-mobile-alt"></i> Mobile Phone Details
                    </h5>
                    <div class="dynamic-table">
                      <table class="table table-bordered" id="mobileTable">
                        <thead class="table-light">
                          <tr>
                            <th>Sr No.</th>
                            <th>Type</th>
                            <th>Number</th>
                            <th>Service Provider</th>
                            <th>Remarks</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td>1</td>
                            <td>
                              <input
                                type="text"
                                class="form-control form-control-sm mobile-input"
                                name="mobileType[]"
                              />
                            </td>
                            <td>
                              <input
                                type="text"
                                class="form-control form-control-sm mobile-input"
                                name="mobileNumber[]"
                              />
                            </td>
                            <td>
                              <input
                                type="text"
                                class="form-control form-sm mobile-input"
                                name="mobileProvider[]"
                              />
                            </td>
                            <td>
                              <input
                                type="text"
                                class="form-control form-control-sm mobile-input"
                                name="mobileRemarks[]"
                              />
                            </td>
                          </tr>
                        </tbody>
                      </table>
                      <button
                        type="button"
                        class="btn btn-sm btn-add-row"
                        id="addMobileRow"
                      >
                        + Add Row
                      </button>
                    </div>
                  </div>
                </div>

                <!-- Additional Information Tab -->
                <div class="tab-pane fade" id="additional" role="tabpanel">
                  <div class="info-box">
                    <i class="fas fa-info-circle"></i> Please provide any
                    additional information that may be relevant to your service
                    record.
                  </div>

                  <div class="form-section">
                    <h3 class="section-header">
                      <i class="fas fa-car"></i> Vehicle Details
                    </h3>

                    <div class="row">
                      <div class="col-md-6 mb-3">
                        <label for="vehicleRegNo" class="form-label"
                          >Registration No.</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="vehicleRegNo"
                        />
                        <div class="error-message" id="vehicleRegNo-error">
                          Only alphanumeric characters, hyphens, and underscores
                          are allowed
                        </div>
                      </div>
                      <div class="col-md-6 mb-3">
                        <label for="vehicleModel" class="form-label"
                          >Model</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="vehicleModel"
                        />
                        <div class="error-message" id="vehicleModel-error">
                          Only letters, numbers, spaces, hyphens, and
                          underscores are allowed
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-6 mb-3">
                        <label for="vehiclePurchaseDate" class="form-label"
                          >Date of Purchase</label
                        >
                        <input
                          type="date"
                          class="form-control"
                          id="vehiclePurchaseDate"
                        />
                      </div>
                      <div class="col-md-6 mb-3">
                        <label class="form-label"
                          >Vehicle Purchased Through AGIF</label
                        >
                        <div>
                          <div class="form-check form-check-inline">
                            <input
                              class="form-check-input"
                              type="radio"
                              name="vehicleAGIF"
                              id="agifYes"
                              value="Yes"
                            />
                            <label class="form-check-label" for="agifYes"
                              >Yes</label
                            >
                          </div>
                          <div class="form-check form-check-inline">
                            <input
                              class="form-check-input"
                              type="radio"
                              name="vehicleAGIF"
                              id="agifNo"
                              value="No"
                            />
                            <label class="form-check-label" for="agifNo"
                              >No</label
                            >
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-4 mb-3">
                        <label for="drivingLicenseNo" class="form-label"
                          >Driving License No.</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="drivingLicenseNo"
                        />
                        <div class="error-message" id="drivingLicenseNo-error">
                          Only alphanumeric characters, hyphens, and underscores
                          are allowed
                        </div>
                      </div>
                      <div class="col-md-4 mb-3">
                        <label for="licenseIssueDate" class="form-label"
                          >Issue Date</label
                        >
                        <input
                          type="date"
                          class="form-control"
                          id="licenseIssueDate"
                        />
                      </div>
                      <div class="col-md-4 mb-3">
                        <label for="licenseExpiryDate" class="form-label"
                          >Date of Expiry</label
                        >
                        <input
                          type="date"
                          class="form-control"
                          id="licenseExpiryDate"
                        />
                      </div>
                    </div>
                  </div>

                  <div class="form-section">
                    <h3 class="section-header">
                      <i class="fas fa-user-plus"></i> Additional Personal
                      Information
                    </h3>

                    <div class="row">
                      <div class="col-md-6 mb-3">
                        <label class="form-label"
                          >Disability Child if any</label
                        >
                        <div>
                          <div class="form-check form-check-inline">
                            <input
                              class="form-check-input"
                              type="radio"
                              name="disabilityChild"
                              id="disabilityYes"
                              value="Yes"
                            />
                            <label class="form-check-label" for="disabilityYes"
                              >Yes</label
                            >
                          </div>
                          <div class="form-check form-check-inline">
                            <input
                              class="form-check-input"
                              type="radio"
                              name="disabilityChild"
                              id="disabilityNo"
                              value="No"
                            />
                            <label class="form-check-label" for="disabilityNo"
                              >No</label
                            >
                          </div>
                        </div>
                      </div>
                      <div class="col-md-6 mb-3">
                        <label class="form-label">Marital Discord Case</label>
                        <div>
                          <div class="form-check form-check-inline">
                            <input
                              class="form-check-input"
                              type="radio"
                              name="maritalDiscord"
                              id="discordYes"
                              value="Yes"
                            />
                            <label class="form-check-label" for="discordYes"
                              >Yes</label
                            >
                          </div>
                          <div class="form-check form-check-inline">
                            <input
                              class="form-check-input"
                              type="radio"
                              name="maritalDiscord"
                              id="discordNo"
                              value="No"
                            />
                            <label class="form-check-label" for="discordNo"
                              >No</label
                            >
                          </div>
                        </div>
                      </div>
                    </div>

                    <div id="maritalDiscordDetails" class="conditional-section">
                      <h6>Marital Discord Case Details</h6>
                      <div class="dynamic-table">
                        <table class="table table-bordered" id="discordTable">
                          <thead class="table-light">
                            <tr>
                              <th>Sr No.</th>
                              <th>Case No.</th>
                              <th>Amount to be Paid</th>
                              <th>Sanction Letter No.</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr>
                              <td>1</td>
                              <td>
                                <input
                                  type="text"
                                  class="form-control form-control-sm discord-input"
                                  name="discordCaseNo[]"
                                />
                              </td>
                              <td>
                                <input
                                  type="text"
                                  class="form-control form-control-sm discord-input"
                                  name="discordAmount[]"
                                />
                              </td>
                              <td>
                                <input
                                  type="text"
                                  class="form-control form-control-sm discord-input"
                                  name="discordSanction[]"
                                />
                              </td>
                            </tr>
                          </tbody>
                        </table>
                        <button
                          type="button"
                          class="btn btn-sm btn-add-row"
                          id="addDiscordRow"
                        >
                          + Add Row
                        </button>
                      </div>
                    </div>

                    <div class="row mt-4">
                      <div class="col-md-12 mb-3">
                        <label for="counselling" class="form-label"
                          >Counselling by RT JCO</label
                        >
                        <textarea
                          class="form-control"
                          id="counselling"
                          rows="2"
                        ></textarea>
                        <div class="error-message" id="counselling-error">
                          Only letters, numbers, spaces, hyphens, and
                          underscores are allowed
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-6 mb-3">
                        <label for="folderPreparedOn" class="form-label"
                          >Folder Prepared On</label
                        >
                        <input
                          type="date"
                          class="form-control"
                          id="folderPreparedOn"
                        />
                      </div>
                      <div class="col-md-6 mb-3">
                        <label for="folderCheckedBy" class="form-label"
                          >Checked By</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="folderCheckedBy"
                        />
                        <div class="error-message" id="folderCheckedBy-error">
                          Only letters, spaces, and hyphens are allowed
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-6 mb-3">
                        <label class="form-label"
                          >Desirous to Bring Family in Station</label
                        >
                        <div>
                          <div class="form-check form-check-inline">
                            <input
                              class="form-check-input"
                              type="radio"
                              name="bringFamily"
                              id="familyYes"
                              value="Yes"
                            />
                            <label class="form-check-label" for="familyYes"
                              >Yes</label
                            >
                          </div>
                          <div class="form-check form-check-inline">
                            <input
                              class="form-check-input"
                              type="radio"
                              name="bringFamily"
                              id="familyNo"
                              value="No"
                            />
                            <label class="form-check-label" for="familyNo"
                              >No</label
                            >
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-12 mb-3">
                        <label for="domesticIssues" class="form-label"
                          >Other Domestic Issues</label
                        >
                        <textarea
                          class="form-control"
                          id="domesticIssues"
                          rows="2"
                        ></textarea>
                        <div class="error-message" id="domesticIssues-error">
                          Only letters, numbers, spaces, hyphens, and
                          underscores are allowed
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-12 mb-3">
                        <label for="otherRequests" class="form-label"
                          >Any Other Requests</label
                        >
                        <textarea
                          class="form-control"
                          id="otherRequests"
                          rows="2"
                        ></textarea>
                        <div class="error-message" id="otherRequests-error">
                          Only letters, numbers, spaces, hyphens, and
                          underscores are allowed
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-12 mb-3">
                        <label for="familyMedicalIssues" class="form-label"
                          >Any Medical Issues to Family</label
                        >
                        <textarea
                          class="form-control"
                          id="familyMedicalIssues"
                          rows="2"
                        ></textarea>
                        <div
                          class="error-message"
                          id="familyMedicalIssues-error"
                        >
                          Only letters, numbers, spaces, hyphens, and
                          underscores are allowed
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-12 mb-3">
                        <label for="qualityPoints" class="form-label"
                          >Write any Five Points to Enhance Quality of Living
                          Standard in Unit</label
                        >
                        <textarea
                          class="form-control"
                          id="qualityPoints"
                          rows="4"
                        ></textarea>
                        <div class="error-message" id="qualityPoints-error">
                          Only letters, numbers, spaces, hyphens, and
                          underscores are allowed
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-12 mb-3">
                        <label for="strengths" class="form-label"
                          >Write Your Strong Points (Your Strength)</label
                        >
                        <textarea
                          class="form-control"
                          id="strengths"
                          rows="3"
                        ></textarea>
                        <div class="error-message" id="strengths-error">
                          Only letters, numbers, spaces, hyphens, and
                          underscores are allowed
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-12 mb-3">
                        <label for="weaknesses" class="form-label"
                          >Write Your Weak Points (Your Weakness)</label
                        >
                        <textarea
                          class="form-control"
                          id="weaknesses"
                          rows="3"
                        ></textarea>
                        <div class="error-message" id="weaknesses-error">
                          Only letters, numbers, spaces, hyphens, and
                          underscores are allowed
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="d-flex justify-content-between mt-4">
                <button type="button" class="btn btn-navigation" id="prevBtn">
                  <i class="fas fa-arrow-left"></i> Previous
                </button>
                <button type="button" class="btn btn-navigation" id="nextBtn">
                  Next <i class="fas fa-arrow-right"></i>
                </button>
                <button type="submit" class="btn btn-submit">
                  <i class="fas fa-paper-plane"></i> Submit Form
                </button>
              </div>
            </form>

            <div class="footer-note">
              <p>
                <i class="fas fa-shield-alt"></i> All information provided will
                be kept confidential and used for official purposes only.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Tab navigation
        const formTabs = document.getElementById("formTabs");
        const prevBtn = document.getElementById("prevBtn");
        const nextBtn = document.getElementById("nextBtn");
        const submitBtn = document.querySelector(".btn-submit");
        const progressBar = document.querySelector(".progress-bar");

        let currentTab = 0;
        const tabs = document.querySelectorAll(".tab-pane");

        function showTab(n) {
          tabs.forEach((tab) => tab.classList.remove("show", "active"));
          tabs[n].classList.add("show", "active");

          const tabButtons = formTabs.querySelectorAll(".nav-link");
          tabButtons.forEach((button) => button.classList.remove("active"));
          tabButtons[n].classList.add("active");

          // Update progress bar
          const progress = ((n + 1) / tabs.length) * 100;
          progressBar.style.width = `${progress}%`;
          progressBar.setAttribute("aria-valuenow", progress);

          // Update buttons
          if (n === 0) {
            prevBtn.style.display = "none";
          } else {
            prevBtn.style.display = "inline-block";
          }

          if (n === tabs.length - 1) {
            nextBtn.style.display = "none";
            submitBtn.style.display = "inline-block";
          } else {
            nextBtn.style.display = "inline-block";
            submitBtn.style.display = "none";
          }

          currentTab = n;
        }

        prevBtn.addEventListener("click", function () {
          if (currentTab > 0) {
            showTab(currentTab - 1);
          }
        });

        nextBtn.addEventListener("click", function () {
          if (currentTab < tabs.length - 1) {
            showTab(currentTab + 1);
          }
        });
        showTab(0);
        const medCatYes = document.getElementById("medCatYes");
        const medCatNo = document.getElementById("medCatNo");
        const medCatDetails = document.getElementById("medCatDetails");

        function toggleMedCatDetails() {
          if (medCatYes.checked) {
            medCatDetails.style.display = "block";
          } else {
            medCatDetails.style.display = "none";
          }
        }

        medCatYes.addEventListener("change", toggleMedCatDetails);
        medCatNo.addEventListener("change", toggleMedCatDetails);

        const borderYes = document.getElementById("borderYes");
        const borderNo = document.getElementById("borderNo");
        const borderDistance = document.getElementById("borderDistance");

        function toggleBorderDistance() {
          if (borderYes.checked) {
            borderDistance.style.display = "block";
          } else {
            borderDistance.style.display = "none";
          }
        }

        borderYes.addEventListener("change", toggleBorderDistance);
        borderNo.addEventListener("change", toggleBorderDistance);

        const loanYes = document.getElementById("loanYes");
        const loanNo = document.getElementById("loanNo");
        const loanDetails = document.getElementById("loanDetails");

        function toggleLoanDetails() {
          if (loanYes.checked) {
            loanDetails.style.display = "block";
          } else {
            loanDetails.style.display = "none";
          }
        }

        loanYes.addEventListener("change", toggleLoanDetails);
        loanNo.addEventListener("change", toggleLoanDetails);

        const detailedYes = document.getElementById("detailedYes");
        const detailedNo = document.getElementById("detailedNo");
        const detailedCourseDetails = document.getElementById(
          "detailedCourseDetails"
        );

        function toggleDetailedCourseDetails() {
          if (detailedYes.checked) {
            detailedCourseDetails.style.display = "block";
          } else {
            detailedCourseDetails.style.display = "none";
          }
        }

        detailedYes.addEventListener("change", toggleDetailedCourseDetails);
        detailedNo.addEventListener("change", toggleDetailedCourseDetails);

        const discordYes = document.getElementById("discordYes");
        const discordNo = document.getElementById("discordNo");
        const maritalDiscordDetails = document.getElementById(
          "maritalDiscordDetails"
        );

        function toggleDiscordDetails() {
          if (discordYes.checked) {
            maritalDiscordDetails.style.display = "block";
          } else {
            maritalDiscordDetails.style.display = "none";
          }
        }

        discordYes.addEventListener("change", toggleDiscordDetails);
        discordNo.addEventListener("change", toggleDiscordDetails);

        function addTableRow(tableId, buttonId, inputClass = "") {
          const table = document.getElementById(tableId);
          const tbody = table.querySelector("tbody");
          const rows = tbody.querySelectorAll("tr");
          const newRow = rows[0].cloneNode(true);

          // Clear input values and assign unique IDs
          newRow.querySelectorAll("input").forEach((input, index) => {
            input.value = "";
            input.className = input.className.replace(/is-invalid/g, "");
            const fieldName = input.name.replace("[]", "");
            input.id = `${fieldName}-${rows.length + 1}-${index}`; // Unique ID
          });

          // Update serial number
          const newSerial = rows.length + 1;
          newRow.cells[0].textContent = newSerial;

          // Add error message elements for each input
          newRow.querySelectorAll("td").forEach((td, index) => {
            if (index > 0) {
              // Skip serial number column
              const input = td.querySelector("input");
              if (input) {
                // Remove existing error element if any
                const existingError = td.querySelector(".error-message");
                if (existingError) existingError.remove();
                // Add new error element
                const errorDiv = document.createElement("div");
                errorDiv.className = "error-message";
                errorDiv.id = `${input.id}-error`;
                errorDiv.style.display = "none";
                errorDiv.textContent = `Invalid ${input.name.replace(
                  "[]",
                  ""
                )}`;
                td.appendChild(errorDiv);
              }
            }
          });

          // Add delete button
          const deleteBtn = document.createElement("button");
          deleteBtn.type = "button";
          deleteBtn.className = "btn btn-sm btn-danger btn-delete-row";
          deleteBtn.textContent = "Delete";
          deleteBtn.addEventListener("click", function () {
            if (tbody.querySelectorAll("tr").length > 1) {
              newRow.remove();
              updateSerialNumbers(tbody);
            }
          });
          newRow.cells[newRow.cells.length - 1].innerHTML = "";
          newRow.cells[newRow.cells.length - 1].appendChild(deleteBtn);

          if (inputClass) {
            newRow.querySelectorAll("input").forEach((input) => {
              if (input.type !== "date" && input.type !== "number") {
                input.classList.add(inputClass);
              }
            });
          }
          tbody.appendChild(newRow);
        }

        function updateSerialNumbers(tbody) {
          const rows = tbody.querySelectorAll("tr");
          rows.forEach((row, index) => {
            row.cells[0].textContent = index + 1;
          });
        }
        document
          .getElementById("addCourseRow")
          .addEventListener("click", function () {
            addTableRow("coursesTable", "addCourseRow", "course-input");
          });
        document
          .getElementById("addUnitRow")
          .addEventListener("click", function () {
            addTableRow("unitsTable", "addUnitRow", "unit-input");
          });
        document
          .getElementById("addFamilyRow")
          .addEventListener("click", function () {
            addTableRow("familyTable", "addFamilyRow", "family-input");
          });
        document
          .getElementById("addChildRow")
          .addEventListener("click", function () {
            addTableRow("childrenTable", "addChildRow", "children-input");
          });
        document
          .getElementById("addLoanRow")
          .addEventListener("click", function () {
            addTableRow("loansTable", "addLoanRow", "loan-input");
          });
        document
          .getElementById("addPunishmentRow")
          .addEventListener("click", function () {
            addTableRow(
              "punishmentTable",
              "addPunishmentRow",
              "punishment-input"
            );
          });
        document
          .getElementById("addDetailedCourseRow")
          .addEventListener("click", function () {
            addTableRow(
              "detailedCoursesTable",
              "addDetailedCourseRow",
              "detailed-course-input"
            );
          });
        document
          .getElementById("addLeaveRow")
          .addEventListener("click", function () {
            addTableRow("leaveTable", "addLeaveRow");
          });
        document
          .getElementById("addMobileRow")
          .addEventListener("click", function () {
            addTableRow("mobileTable", "addMobileRow", "mobile-input");
          });

        document
          .getElementById("addDiscordRow")
          .addEventListener("click", function () {
            addTableRow("discordTable", "addDiscordRow", "discord-input");
          });

        function validateInput(input) {
          const errorElement = document.getElementById(`${input.id}-error`);
          const isValid =
            input.value &&
            (!input.pattern || new RegExp(input.pattern).test(input.value));

          if (!isValid) {
            if (errorElement) {
              errorElement.style.display = "block";
              errorElement.textContent = `Invalid ${input.name.replace(
                "[]",
                ""
              )}`;
            } else {
              console.warn(`Error element not found for input ID: ${input.id}`);
            }
            input.classList.add("is-invalid");
            return false;
          }
          if (errorElement) {
            errorElement.style.display = "none";
          }
          input.classList.remove("is-invalid");
          return true;
        }

        const patterns = {
          name: /^[a-zA-Z\s\-]+$/,
          armyNumber: /^[a-zA-Z0-9\-_]+$/,
          rank: /^[a-zA-Z0-9\-_\s]+$/,
          trade: /^[a-zA-Z0-9\-_\s]+$/,
          religion: /^[a-zA-Z\s\-_]+$/,
          civQualifications: /^[a-zA-Z0-9\s\-_]+$/,
          decorationAwards: /^[a-zA-Z0-9\s\-_]+$/,
          lackingQualifications: /^[a-zA-Z0-9\s\-_]+$/,
          iCardNo: /^[a-zA-Z0-9\-_]+$/,
          iCardIssuedBy: /^[a-zA-Z0-9\s\-_]+$/,
          bpetGrading: /^[a-zA-Z0-9\-_]+$/,
          pptGrading: /^[a-zA-Z0-9\-_]+$/,
          panCardNo: /^[a-zA-Z0-9]+$/,
          panPartII: /^[a-zA-Z0-9\-_]+$/,
          aadharCardNo: /^[0-9]+$/,
          aadharPartII: /^[a-zA-Z0-9\-_]+$/,
          jointAccountNo: /^[a-zA-Z0-9\-_]+$/,
          jointAccountBank: /^[a-zA-Z0-9\s\-_]+$/,
          jointAccountIFSC: /^[a-zA-Z0-9]+$/,
          homeHouseNo: /^[a-zA-Z0-9\s\-_]+$/,
          homeVillage: /^[a-zA-Z0-9\s\-_]+$/,
          homePhone: /^[0-9+\-]+$/,
          homeTO: /^[a-zA-Z0-9\s\-_]+$/,
          homePO: /^[a-zA-Z0-9\s\-_]+$/,
          homePS: /^[a-zA-Z0-9\s\-_]+$/,
          homeTeh: /^[a-zA-Z0-9\s\-_]+$/,
          homeNRS: /^[a-zA-Z0-9\s\-_]+$/,
          homeNMH: /^[a-zA-Z0-9\s\-_]+$/,
          homeDistrict: /^[a-zA-Z0-9\s\-_]+$/,
          homeState: /^[a-zA-Z0-9\s\-_]+$/,
          distanceFromIB: /^[0-9.]+$/,
          height: /^[0-9.]+$/,
          weight: /^[0-9.]+$/,
          chest: /^[0-9.]+$/,
          identificationMarks: /^[a-zA-Z0-9\s\-_]+$/,
          courtCases: /^[a-zA-Z0-9\s\-_]+$/,
          lastRecatBDAt: /^[a-zA-Z0-9\s\-_]+$/,
          medicalProblem: /^[a-zA-Z0-9\s\-_]+$/,
          restrictions: /^[a-zA-Z0-9\s\-_]+$/,
          kinName: /^[a-zA-Z\s\-]+$/,
          kinRelation: /^[a-zA-Z\s\-]+$/,
          kinAccountNo: /^[a-zA-Z0-9\-_]+$/,
          kinBank: /^[a-zA-Z0-9\s\-_]+$/,
          kinIFSC: /^[a-zA-Z0-9]+$/,
          kinPartII: /^[a-zA-Z0-9\-_]+$/,
          vehicleRegNo: /^[a-zA-Z0-9\-_]+$/,
          vehicleModel: /^[a-zA-Z0-9\s\-_]+$/,
          drivingLicenseNo: /^[a-zA-Z0-9\-_]+$/,
          workedUnitTenure: /^[a-zA-Z0-9\s\-_]+$/,
          participationActivities: /^[a-zA-Z0-9\s\-_]+$/,
          presentFamilyLocation: /^[a-zA-Z0-9\s\-_]+$/,
          counselling: /^[a-zA-Z0-9\s\-_]+$/,
          folderCheckedBy: /^[a-zA-Z\s\-]+$/,
          domesticIssues: /^[a-zA-Z0-9\s\-_]+$/,
          otherRequests: /^[a-zA-Z0-9\s\-_]+$/,
          familyMedicalIssues: /^[a-zA-Z0-9\s\-_]+$/,
          qualityPoints: /^[a-zA-Z0-9\s\-_]+$/,
          strengths: /^[a-zA-Z0-9\s\-_]+$/,
          weaknesses: /^[a-zA-Z0-9\s\-_]+$/,
        };
        Object.keys(patterns).forEach((fieldId) => {
          const input = document.getElementById(fieldId);
          if (input) {
            input.addEventListener("input", function () {
              validateInput(
                this,
                patterns[fieldId],
                document.getElementById(`${fieldId}-error`)
              );
            });
          }
        });
        function addValidationToDynamicInputs(className, pattern) {
          document.addEventListener("input", function (e) {
            if (e.target.classList.contains(className)) {
              const value = e.target.value;
              if (value && !pattern.test(value)) {
                e.target.classList.add("is-invalid");
              } else {
                e.target.classList.remove("is-invalid");
              }
            }
          });
        }
        addValidationToDynamicInputs("course-input", /^[a-zA-Z0-9\s\-_]+$/);
        addValidationToDynamicInputs("unit-input", /^[a-zA-Z0-9\s\-_]+$/);
        addValidationToDynamicInputs("loan-input", /^[a-zA-Z0-9\s\-_]+$/);
        addValidationToDynamicInputs("punishment-input", /^[a-zA-Z0-9\s\-_]+$/);
        addValidationToDynamicInputs(
          "detailed-course-input",
          /^[a-zA-Z0-9\s\-_]+$/
        );
        addValidationToDynamicInputs("leave-input", /^[a-zA-Z0-9\s\-_]+$/);
        addValidationToDynamicInputs("family-input", /^[a-zA-Z0-9\s\-_]+$/);
        addValidationToDynamicInputs("children-input", /^[a-zA-Z0-9\s\-_]+$/);
        addValidationToDynamicInputs("mobile-input", /^[a-zA-Z0-9\s\-_]+$/);
        addValidationToDynamicInputs("discord-input", /^[a-zA-Z0-9\s\-_]+$/);

        document
          .getElementById("armyForm")
          .addEventListener("submit", function (e) {
            e.preventDefault();
            const requiredFields = this.querySelectorAll("[required]");
            let valid = true;

            requiredFields.forEach((field) => {
              if (!field.value) {
                valid = false;
                field.classList.add("is-invalid");
              } else {
                field.classList.remove("is-invalid");
              }
            });
            Object.keys(patterns).forEach((fieldId) => {
              const input = document.getElementById(fieldId);
              if (input && input.value) {
                if (
                  !validateInput(
                    input,
                    patterns[fieldId],
                    document.getElementById(`${fieldId}-error`)
                  )
                ) {
                  valid = false;
                }
              }
            });

            if (valid) {
              alert("Form submitted successfully!");
            } else {
              alert("Please correct the errors in the form before submitting.");
            }
          });
        document
          .getElementById("armyForm")
          .addEventListener("submit", function (e) {
            e.preventDefault();

            const requiredFields = this.querySelectorAll("[required]");
            let valid = true;

            requiredFields.forEach((field) => {
              if (!field.value) {
                valid = false;
                field.classList.add("is-invalid");
              } else {
                field.classList.remove("is-invalid");
              }
            });

            Object.keys(patterns).forEach((fieldId) => {
              const input = document.getElementById(fieldId);
              if (input && input.value) {
                if (
                  !validateInput(
                    input,
                    patterns[fieldId],
                    document.getElementById(`${fieldId}-error`)
                  )
                ) {
                  valid = false;
                }
              }
            });

            if (valid) {
              const formData = collectFormData();
              submitFormData(formData);
            } else {
              alert("Please correct the errors in the form before submitting.");
            }
          });

        function collectFormData() {
          const data = {
            name: document.getElementById("name").value,
            armyNumber: document.getElementById("armyNumber").value,
            rank: document.getElementById("rank").value,
            trade: document.getElementById("trade").value,
            dateOfEnrollment: document.getElementById("dateOfEnrollment").value,
            dateOfBirth: document.getElementById("dateOfBirth").value,
            dateOfTOS: document.getElementById("dateOfTOS").value,
            dateOfTORS: document.getElementById("dateOfTORS").value,
            bloodGroup: document.getElementById("bloodGroup").value,
            religion: document.getElementById("religion").value,
            foodPreference:
              document.querySelector('input[name="foodPreference"]:checked')
                ?.value || "",
            drinker:
              document.querySelector('input[name="drinker"]:checked')?.value ||
              "",
            civQualifications:
              document.getElementById("civQualifications").value,
            decorationAwards: document.getElementById("decorationAwards").value,
            lackingQualifications: document.getElementById(
              "lackingQualifications"
            ).value,
            willingPromotions:
              document.querySelector('input[name="willingPromotions"]:checked')
                ?.value || "",
            iCardNo: document.getElementById("iCardNo").value,
            iCardDate: document.getElementById("iCardDate").value,
            iCardIssuedBy: document.getElementById("iCardIssuedBy").value,
            bpetGrading: document.getElementById("bpetGrading").value,
            pptGrading: document.getElementById("pptGrading").value,
            bpetDate: document.getElementById("bpetDate").value,
            clothingCard:
              document.querySelector('input[name="clothingCard"]:checked')
                ?.value || "",
            panCardNo: document.getElementById("panCardNo").value,
            panPartII: document.getElementById("panPartII").value,
            aadharCardNo: document.getElementById("aadharCardNo").value,
            aadharPartII: document.getElementById("aadharPartII").value,
            jointAccountNo: document.getElementById("jointAccountNo").value,
            jointAccountBank: document.getElementById("jointAccountBank").value,
            jointAccountIFSC: document.getElementById("jointAccountIFSC").value,

            homeHouseNo: document.getElementById("homeHouseNo").value,
            homeVillage: document.getElementById("homeVillage").value,
            homePhone: document.getElementById("homePhone").value,
            homeTO: document.getElementById("homeTO").value,
            homePO: document.getElementById("homePO").value,
            homePS: document.getElementById("homePS").value,
            homeTeh: document.getElementById("homeTeh").value,
            homeNRS: document.getElementById("homeNRS").value,
            homeNMH: document.getElementById("homeNMH").value,
            homeDistrict: document.getElementById("homeDistrict").value,
            homeState: document.getElementById("homeState").value,
            borderArea:
              document.querySelector('input[name="borderArea"]:checked')
                ?.value || "",
            distanceFromIB: document.getElementById("distanceFromIB").value,

            height: document.getElementById("height").value,
            weight: document.getElementById("weight").value,
            chest: document.getElementById("chest").value,
            identificationMarks: document.getElementById("identificationMarks")
              .value,

            courtCases: document.getElementById("courtCases").value,
            loan:
              document.querySelector('input[name="loan"]:checked')?.value || "",
            totalLeavesEncashed: document.getElementById("totalLeavesEncashed")
              .value,
            participationActivities: document.getElementById(
              "participationActivities"
            ).value,
            presentFamilyLocation: document.getElementById(
              "presentFamilyLocation"
            ).value,
            priorStation:
              document.querySelector('input[name="priorStation"]:checked')
                ?.value || "",
            priorStationDate: document.getElementById("priorStationDate").value,
            workedIT:
              document.querySelector('input[name="workedIT"]:checked')?.value ||
              "",
            workedUnitTenure: document.getElementById("workedUnitTenure").value,
            detailedCourse:
              document.querySelector('input[name="detailedCourse"]:checked')
                ?.value || "",

            medCat:
              document.querySelector('input[name="medCat"]:checked')?.value ||
              "",
            lastRecatBDDate: document.getElementById("lastRecatBDDate").value,
            lastRecatBDAt: document.getElementById("lastRecatBDAt").value,
            nextRecatDue: document.getElementById("nextRecatDue").value,
            medicalProblem: document.getElementById("medicalProblem").value,
            restrictions: document.getElementById("restrictions").value,
            computerKnowledge:
              document.getElementById("computerKnowledge").value,
            itLiterature: document.getElementById("itLiterature").value,

            kinName: document.getElementById("kinName").value,
            kinRelation: document.getElementById("kinRelation").value,
            kinMarriageDate: document.getElementById("kinMarriageDate").value,
            kinAccountNo: document.getElementById("kinAccountNo").value,
            kinBank: document.getElementById("kinBank").value,
            kinIFSC: document.getElementById("kinIFSC").value,
            kinPartII: document.getElementById("kinPartII").value,

            vehicleRegNo: document.getElementById("vehicleRegNo").value,
            vehicleModel: document.getElementById("vehicleModel").value,
            vehiclePurchaseDate: document.getElementById("vehiclePurchaseDate")
              .value,
            vehicleAGIF:
              document.querySelector('input[name="vehicleAGIF"]:checked')
                ?.value || "",
            drivingLicenseNo: document.getElementById("drivingLicenseNo").value,
            licenseIssueDate: document.getElementById("licenseIssueDate").value,
            licenseExpiryDate:
              document.getElementById("licenseExpiryDate").value,

            disabilityChild:
              document.querySelector('input[name="disabilityChild"]:checked')
                ?.value || "",
            maritalDiscord:
              document.querySelector('input[name="maritalDiscord"]:checked')
                ?.value || "",
            counselling: document.getElementById("counselling").value,
            folderPreparedOn: document.getElementById("folderPreparedOn").value,
            folderCheckedBy: document.getElementById("folderCheckedBy").value,
            bringFamily:
              document.querySelector('input[name="bringFamily"]:checked')
                ?.value || "",
            domesticIssues: document.getElementById("domesticIssues").value,
            otherRequests: document.getElementById("otherRequests").value,
            familyMedicalIssues: document.getElementById("familyMedicalIssues")
              .value,
            qualityPoints: document.getElementById("qualityPoints").value,
            strengths: document.getElementById("strengths").value,
            weaknesses: document.getElementById("weaknesses").value,

            courses: collectTableData("coursesTable", [
              "course",
              "courseFrom",
              "courseTo",
              "courseInstitute",
              "courseGrading",
              "courseRemarks",
            ]),
            units: collectTableData("unitsTable", [
              "unit",
              "unitFrom",
              "unitTo",
              "unitDuty",
            ]),
            loans: collectTableData("loansTable", [
              "loanType",
              "loanAmount",
              "loanBank",
              "loanEMI",
              "loanPending",
              "loanRemarks",
            ]),
            punishments: collectTableData("punishmentTable", [
              "punishmentDate",
              "punishment",
              "punishmentAASec",
              "punishmentRemarks",
            ]),
            detailedCourses: collectTableData("detailedCoursesTable", [
              "detailedCourseName",
              "detailedCourseFrom",
              "detailedCourseTo",
              "detailedCourseRemarks",
            ]),
            leaves: collectTableData("leaveTable", [
              "leaveYear",
              "leaveAL",
              "leaveCL",
              "leaveAAL",
              "leaveTotal",
              "leaveRemarks",
            ]),
            family: collectTableData("familyTable", [
              "familyRelation",
              "familyName",
              "familyDOB",
              "familyUID",
              "familyPartII",
            ]),
            children: collectTableData("childrenTable", [
              "childName",
              "childDOB",
              "childClass",
              "childPartII",
              "childUID",
            ]),
            mobiles: collectTableData("mobileTable", [
              "mobileType",
              "mobileNumber",
              "mobileProvider",
              "mobileRemarks",
            ]),
            discordCases: collectTableData("discordTable", [
              "discordCaseNo",
              "discordAmount",
              "discordSanction",
            ]),
          };

          return data;
        }
        function collectTableData(tableId, fieldNames) {
          const table = document.getElementById(tableId);
          const rows = table.querySelectorAll("tbody tr");
          const data = [];

          rows.forEach((row) => {
            const rowData = {};
            const inputs = row.querySelectorAll("input, select, textarea");

            inputs.forEach((input, index) => {
              if (fieldNames[index]) {
                rowData[fieldNames[index]] = input.value;
              }
            });
            if (Object.values(rowData).some((val) => val !== "")) {
              data.push(rowData);
            }
          });

          return data;
        }
        async function submitFormData(formData) {
          console.log(
            "Form data to be sent:",
            JSON.stringify(formData, null, 2)
          );
          const submitBtn = document.querySelector(".btn-submit");
          const originalText = submitBtn.innerHTML;
          submitBtn.innerHTML =
            '<i class="fas fa-spinner fa-spin"></i> Submitting...';
          submitBtn.disabled = true;

          try {
            // Validate all inputs
            const inputs = document.querySelectorAll("input, select");
            let isValid = true;
            inputs.forEach((input) => {
              if (!validateInput(input)) {
                isValid = false;
              }
            });

            if (!isValid) {
              console.error("Form validation failed");
              const modal = new bootstrap.Modal(
                document.getElementById("formModal")
              );
              document.getElementById("modalTitle").textContent = "Error";
              document.getElementById("modalMessage").textContent =
                "Please correct the form errors before submitting.";
              modal.show();
              submitBtn.innerHTML = originalText;
              submitBtn.disabled = false;
              return;
            }

            const response = await fetch(
              "http://localhost:5000/api/personnel",
              {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(formData),
              }
            );
            const result = await response.json();
            submitBtn.innerHTML = originalText;
            submitBtn.disabled = false;

            const modal = new bootstrap.Modal(
              document.getElementById("formModal")
            );
            if (response.ok && result.success) {
              document.getElementById("modalTitle").textContent = "Success";
              document.getElementById(
                "modalMessage"
              ).textContent = `Form submitted successfully! Personnel ID: ${result.personnel_id}`;
              modal.show();
              document.querySelector("form").reset();
            } else {
              document.getElementById("modalTitle").textContent = "Error";
              document.getElementById("modalMessage").textContent =
                result.message || "Failed to submit form";
              if (result.errors) {
                console.error("Backend errors:", result.errors);
                document.getElementById(
                  "modalMessage"
                ).textContent += `\nErrors: ${result.errors.join(", ")}`;
              }
              modal.show();
            }
          } catch (error) {
            console.error("Submission error:", error);
            const modal = new bootstrap.Modal(
              document.getElementById("formModal")
            );
            document.getElementById("modalTitle").textContent = "Error";
            document.getElementById("modalMessage").textContent =
              "An unexpected error occurred";
            modal.show();
            submitBtn.innerHTML = originalText;
            submitBtn.disabled = false;
          }
        }
      });
    </script>
  </body>
</html>

<style>
    .blink {
        animation: blinkEffect 4s 5;
    }
    
    @keyframes blinkEffect {
        0% { opacity: 1; }
        50% { opacity: 0; }
        100% { opacity: 1; }
    }
    </style>
    
    <span id="eventAlarm" class="badge bg-warning text-dark d-none" style="cursor:pointer;">
        ðŸ”” You have Event alarms!
    </span>
    
    <script>
    async function showTodayEventAlarms() {
        try {
            const res = await fetch('/api/today_event_alarm');
            if (!res.ok) throw new Error("Network error");
            const result = await res.json();
    
            const alarm = document.getElementById("eventAlarm");
    
            if (result.rows && result.rows.length > 0) {
                alarm.classList.remove("d-none");
                alarm.classList.add("blink");
                alarm.innerText = `ðŸ”” ${result.rows.length} Event(s) Today`;
            } else {
                alarm.classList.add("d-none");
                alarm.classList.remove("blink");
            }
        } catch (err) {
            console.error(err);
        }
    }
    
    document.addEventListener('DOMContentLoaded', showTodayEventAlarms);
    
    document.getElementById("eventAlarm").addEventListener("click", function () {
        const modal = new bootstrap.Modal(document.getElementById('eventModal'));
        modal.show();
        loadTodayEvents();
    });
    </script>
    
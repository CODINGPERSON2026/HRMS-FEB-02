<div class="modal fade" id="centerRollCallModal" tabindex="-1">
  <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable modal-fullscreen-md-down" 
       style="max-width: 1400px; margin-top: 5vh;">
    <div class="modal-content border-0 shadow-lg rounded-3 overflow-hidden">

      <div class="modal-header bg-primary text-white py-3">
        <h5 class="modal-title fw-bold fs-4">Pending Centre Roll Call Points</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body bg-light p-4">

        <div class="table-responsive">
          <table class="table table-bordered table-hover align-middle table-striped mb-0">
            <thead class="bg-dark text-white shadow-sm" style="position: sticky; top: 0; z-index: 10;">
              <tr class="text-uppercase fw-semibold" style="letter-spacing: 0.5px; font-size: 0.95rem;">
                <th class="text-center py-3" style="width: 60px;">#</th>
                <th class="py-3">Army No</th>
                <th class="py-3">Name</th>
                <th class="py-3">Rank</th>
                <th class="py-3">Company</th>
                <th class="py-3">Category</th>
                <th class="py-3">Title</th>
                <th class="py-3" style="min-width: 320px;">Description</th>
                <th class="py-3">Date</th>
              </tr>
            </thead>
            <tbody id="centerRollCallTable">
              <tr>
                <td colspan="9" class="text-center text-muted py-5 fs-5">Loading...</td>
              </tr>
            </tbody>
          </table>
        </div>

      </div>
    </div>
  </div>
</div>

<style>
  /* Enhanced scrollable description column */
  #centerRollCallTable td:nth-child(8) {
    max-width: 320px;
    overflow-x: auto;
    white-space: nowrap;
    padding: 12px !important;
  }
  #centerRollCallTable td:nth-child(8)::-webkit-scrollbar {
    height: 7px;
  }
  #centerRollCallTable td:nth-child(8)::-webkit-scrollbar-thumb {
    background-color: rgba(0,0,0,0.3);
    border-radius: 10px;
  }

  /* Improved row hover */
  #centerRollCallTable tr:hover {
    background-color: #e3f2fd !important;
    transition: background-color 0.2s ease;
  }

  /* Slight shadow under sticky header */
  thead.shadow-sm {
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  }
</style>

<script>
  document.getElementById('centerRollCallModal')
    .addEventListener('show.bs.modal', function () {
  
      fetch('/roll_call/pending')
        .then(res => res.json())
        .then(res => {
          const tbody = document.getElementById('centerRollCallTable');
          tbody.innerHTML = '';
  
          if (!res.data || res.data.length === 0) {
            tbody.innerHTML = `
              <tr>
                <td colspan="9" class="text-center text-muted py-5 fs-4">
                  No pending roll call points
                </td>
              </tr>`;
            return;
          }
  
          res.data.forEach((row, index) => {
            tbody.innerHTML += `
              <tr>
                <td class="text-center fw-medium">${index + 1}</td>
                <td>${row.army_number}</td>
                <td class="fw-medium">${row.name}</td>
                <td>${row.rank}</td>
                <td>${row.company}</td>
                <td>${row.category}</td>
                <td>${row.point_title}</td>
                <td>${row.point_description}</td>
                <td>${new Date(row.created_at).toLocaleDateString()}</td>
              </tr>`;
          });
        });
  });
</script>